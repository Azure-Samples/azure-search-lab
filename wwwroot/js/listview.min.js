(function(e,x){e.widget("ui.listview",e.extend({options:{theme:null,countTheme:null,dividerTheme:null,icon:"carat-r",splitIcon:"carat-r",splitTheme:null,corners:!0,shadow:!0,inset:!1},_create:function(){var a;a=""+(this.options.inset?" ui-listview-inset":"");this.options.inset&&(a+=this.options.corners?" ui-corner-all":"",a+=this.options.shadow?" ui-shadow":"");this.element.addClass(" ui-listview"+a);this.element.parent().addClass("ui-widget");this.refresh(!0)},_findFirstElementByTagName:function(a,
c,b,e){var d={};for(d[b]=d[e]=!0;a;){if(d[a.nodeName])return a;a=a[c]}return null},_addThumbClasses:function(a){var c,b,l=a.length;for(c=0;c<l;c++)b=e(this._findFirstElementByTagName(a[c].firstChild,"nextSibling","img","IMG")),b.length&&e(this._findFirstElementByTagName(b[0].parentNode,"parentNode","li","LI")).addClass(b.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")},_getChildrenByTagName:function(a,c,b){var l=[],d={};d[c]=d[b]=!0;for(a=a.firstChild;a;)d[a.nodeName]&&l.push(a),a=a.nextSibling;
return e(l)},_getAttr:function(a,c){var b;(a=a.jquery?a[0]:a)&&a.getAttribute&&(b=a.getAttribute("data-"+c));try{b="true"===b?!0:"false"===b?!1:"null"===b?null:+b+""===b?+b:rbrace.test(b)?JSON.parse(b):b}catch(e){}return b},_beforeListviewRefresh:e.noop,_afterListviewRefresh:e.noop,refresh:function(a){var c,b,l,d,h,g,f,t,m,u,n,p=this.options,k=this.element,v=!!e.nodeName(k[0],"ol");b=k.attr("start");var q={},w=k.find(".ui-li-count"),r=this._getAttr(k[0],"counttheme")||this.options.countTheme,r=r?
"ui-body-"+r:"ui-body-inherit";p.theme&&k.addClass("ui-group-theme-"+p.theme);v&&(b||0===b)&&(b=parseInt(b,10)-1,k.css("counter-reset","listnumbering "+b));this._beforeListviewRefresh();n=this._getChildrenByTagName(k[0],"li","LI");b=0;for(l=n.length;b<l;b++){d=n.eq(b);h="";if(a||0>d[0].className.search(/\bui-li-static\b|\bui-li-divider\b/))f=this._getChildrenByTagName(d[0],"a","A"),g="list-divider"===this._getAttr(d[0],"role"),t=d.attr("value"),c=this._getAttr(d[0],"theme"),f.length&&0>f[0].className.search(/\bui-btn\b/)&&
!g?(c=this._getAttr(d[0],"icon"),g=!1===c?!1:c||p.icon,f.removeClass("ui-link"),c="ui-state-default ui-btn",1<f.length?(h="ui-li-has-alt",g=f.last(),m=(m=this._getAttr(g[0],"theme")||p.splitTheme||this._getAttr(d[0],"theme",!0))?" ui-btn-"+m:"",u=this._getAttr(g[0],"icon")||this._getAttr(d[0],"icon")||p.splitIcon,m="ui-btn ui-icon ui-icon-"+u+m,g.attr("title",e.trim(g.getEncodedText())).addClass(m).empty(),f=f.first()):g&&(c+=" ui-btn-icon-right ui-icon-"+g),f.addClass(c),this._hoverable(f),this._focusable(f)):
g?(this._getAttr(d[0],"theme"),h="ui-li-divider ui-widget-header",d.attr("role","heading")):0>=f.length&&(h="ui-li-static ui-widget-content ui-body-"+(c?c:"inherit")),v&&t&&(f=parseInt(t,10)-1,d.css("counter-reset","listnumbering "+f));q[h]||(q[h]=[]);q[h].push(d[0])}for(h in q)e(q[h]).addClass(h);w.each(function(){e(this).closest("li").addClass("ui-li-has-count")});r&&w.not("[class*='ui-body-']").addClass(r);this._addThumbClasses(n);this._addThumbClasses(n.find(".ui-btn"));this._afterListviewRefresh();
k.removeClass("ui-first-child ui-last-child");n.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child")}}))})(jQuery);